[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Charles Lehnen",
    "section": "",
    "text": "I am an ecologist driven to unravel the complexities of community dynamics and the cascading trophic effects that shape our natural world. My career has led me through a variety of roles, from leading a natural history study of Galapagos Diptera across five islands, assessing potential bat habitat in the man-made abandoned mineshafts of New Mexico, to conducting transects across the Nevada desert to track the population dynamics of Mojave Desert tortoises.\nAlong the way, I have honed my skills in the field working with cutting edge technologies including mutli-spectral drones, advanced GNSS systems, LiDAR, camera traps, and remote sensing. In the classroom, through TAships I have focused on teaching quantitive skills including Python, R, occupancy models, and bayesian statistics.\nCurrently, as a third-year PhD candidate at the University of Southern California, I am leading a team to research the effects of rewilding Santa Fe Island in the Galapagos through the introduction of Española Giant Tortoises (Chelonoidis hoodensis).\nInterests: Biogeography, Trophic Ecology, Ecological Restoration, Science Communication, Quantative Ecology\n\n\nI am always looking to collaborate and share ideas, feel free to reach out to me via email.\n\n\n\nScience education is an essential aspect of my work. If I am not helping to empower the next generation of scientists, I feel that my job as a scientist is not complete. If you are seeking mentorship, help, or just advice, please contact me via email."
  },
  {
    "objectID": "index.html#inquiries",
    "href": "index.html#inquiries",
    "title": "Charles Lehnen",
    "section": "",
    "text": "I am always looking to collaborate and share ideas, feel free to reach out to me via email."
  },
  {
    "objectID": "index.html#mentorship",
    "href": "index.html#mentorship",
    "title": "Charles Lehnen",
    "section": "",
    "text": "Science education is an essential aspect of my work. If I am not helping to empower the next generation of scientists, I feel that my job as a scientist is not complete. If you are seeking mentorship, help, or just advice, please contact me via email."
  },
  {
    "objectID": "projects.html",
    "href": "projects.html",
    "title": "Projects",
    "section": "",
    "text": "Research Projects\n\nTortoise Terraforming: Will the Introduction of Española Galapagos Giant Tortoises Restore Santa Fe Island’s Ecosystem?\n\nIn collaboration with Galapagos Conservancy and Iniativa Galápagos, my doctoral research investigates the ecological impacts of introducing Española Giant Tortoises (Chelonoidis hoodensis) to Santa Fe Island, where tortoises have been extinct since the mid-1800s. This project, initiated with a succesful pilot season in the summer of 2023, employs modern ecological techniques including multi-spectral drone imagery, isotope analysis from tortoise keratin, and camera traps to monitor feeding behaviors. The aim is not only to assess the restoration of Santa Fe but also to provide a model for similar conservation efforts globally, offering insights into how other species can be used to revive ecosystems. My work proudly adheres to stringent Galapagos National Park regulations to ensure the protection of wildlife and research integrity.\n\n“Do Giant Tortoises Make Good Neighbors?”.\n\nDistribution of Arthropod Diversity in Los Angeles\n\nIn collaboration with the Los Angeles Natural History Museum (NHM) and Cal State, we examined the impact of various factors on arthropod diversity across Los Angeles, analyzing topographical, abiotic, and anthropogenic drivers. We explored the complex responses within and between six arthropod groups, revealing high regional diversity and variable spatial composition. This research underscores the nuanced relationship between urban development and biodiversity, contributing valuable insights for urban ecology and land management practices.\n\n“Drivers of arthropod biodiversity in an urban ecosystem”\n“Are bugs bugging humans or the other way around? Study reveals surprises”\n\nNatural History of Galapagos Diptera\n\nI led a 4-year natural history study across 5 of the Galapagos islands. This project was a key aspect to the goals of the international Philornis Working Group which focuses on the devastatingly invasive fly Philornis downsi. Understanding the ecology of Galapagos Diptera was essential in estimating impacts of P. downsi control prospects and acquiring endemic, dipteran pupae for non-target biocontrol testing. Prior to my study, the community ecology and rearing substrates of Galapagos Diptera had been virtually unknown. Presently, I am preparing the associated publication as first author.\nAssesing Abandoned Mines as a Protected Resource\n\nWe evaluated the biological relevance of abandoned New Mexican mines as bat roosting, flyover sites, and/or hibernacula. This also included nose swabs for Pseudogymnoascus destructans and guano collection for molecular analysis. Sites were reached through technical 4x4 off-roading, backcountry hiking, and advanced vertical ropework. We used technology including LiDAR, satellite imagery, ArcGIS, GPS, and orienteering to collect precise geospatial data. As an auxiliary aspect, we conducted pre-development avian surveys at mine closure sites utilizing bird identification and nest surveying skills.\n\n“Where the Bats Go”.\n“Locating Potential Bat Habitats in Abandoned Mines with GIS”\n\nUSFWS Population Monitoring of Mojave Desert Tortoises\n\nAlong line-distance sampling transects, I collected georeferenced biometric data on IUCN vulnerable Mojave desert tortoise (Gopherus agassizii) populations across Nevada following strict sterile field technique. Metrics included body condition scores, nasal/discharge scores to screen for Mycoplasma infection, and morphological measurements. All protocols were specifically designed to avoid complications including hypothermia, loss of fluids, and transmission of disease/parasites between tortoises.\nCharles Darwin Foundation GeoPortal Development\n\nI helped develop a novel GeoPortal which distributes Galapagos geographical data to the public and Charles Darwin Foundation (CDF) collaborating scientists. I navigated the CDF’s local, WCS, WFS, WMS distributions as well as their SQL and GeoServer-based databases to gather GIS data. I used QGIS and ArcGIS to analyze this data and then created associated, robust metadata. I helped to improve the GeoPortal’s user interface by building a lightweight, intuitive directory and Wiki using HTML/CSS. The current version of the web application can be viewed at geodata-fcdgps.opendata.arcgis.com/\nGalapagos National Park Internship\n\nAs a Galapagos National Park intern, I aided in the rearing and husbandry of 180 semi-captive, IUCN endangered Chelonoidis chathamensis tortoises. Tasks consisted of the collection of eggs, monitoring of incubation, care of neonates, preparations of cohort for repatriation, four separate monitoring campaigns, and organization of volunteers. Additionally, I re-invigorated San Cristobal Island’s endemic plant breeding program. Through avid seed and seedling collection, propagation, and nursery care I was able to produce several hundred plants from 20 endemic or native species that were distributed to park and community member land.\nRegulatory T-cell Research\n\nThrough the University of Minnesota Medical School, I explored the potential of human regulatory T cell-based cellular therapy for Graft-Versus-Host Disease by independently designing and optimizing a novel lentiviral transduction program. The current lab group has continued to build upon my initial protocols. In my role, I also served as the manager of the experimental mouse breeding colony, supervised four interns, and was a co-advisor to two undergraduate directed research projects. My work culminated in a publication in the journal Transplantation as co-author and a research symposium poster at the Masonic Cancer Center Research Symposium.\nUrban Forestry of Elm Trees\n\nI aided in the research of Dutch elm disease, nursery techniques, and forestry in harsh, urban field sites. I was trained in plant propagation, agricultural, and pruning techniques in the care of cuttings, seedlings, young trees, as well as nursery stock. I collected seed and took geospatial correlated data at numerous field sites around the state in close collaboration with Saint Paul Parks and Recreation foresters. I personally managed 8 acres of field plots and completed a self-directed research project on Arachis hypogaea growing conditions.\n\n\n\nScience Education Projects\n\nJEP STEM Fellowship\n\nLeading the WonderKids virtual afterschool program, I designed and implemented a semester long curriculum that broadens K-5 students’ understanding of STEM, emphasizing diversity in science through guest speaker sessions and virtual tours of scientists’ workspaces. By showcasing scientists from various backgrounds and subfields, the program aims to inspire students to envision themselves in scientific roles while engaging students with hands-on science experiments. My global network enabled me to introduce students to a wide range of scientific careers, reinforcing the program’s commitment to diversity and inclusion in science education.\n\nUSC Wonderkids Program Videos\n\nEcology and Biodiversity Teaching Assistantship\n\nContributing to developing USC’s brand new “Ecology and Biodiversity” course for undergraduate juniors and seniors, I collaborated with course lecturers to design a new syllabus and created all lab materials/assignments using R and Quarto. These resources, which can be found online, are designed to teach students programming skills for quantitative ecology research, offering them hands-on experience in analyzing ecological data.\nAnthropology and General Biology Teaching Assistantship\n\nServing as a teaching assistant for the uniquely structured general biology course “The Human Animal,” I prepared lab lectures and organized materials, notably an extensive library of fossil casts. I introduced and developed new lab units, such as a segment on brain anatomy and functional morphology using an Anatomage Table, providing students with a hands-on approach to understanding the complex topics. This course’s unique angle on biology, through the lens of tying back every concept to humans, was particularly engaging for students from across majors taking a general biology course.\nHuman Physiology Undergraduate Teaching Assistantship\n\nAs a teaching assistant, I worked in a team with three professors and fellow TAs to deliver a high quality undergraduate human physiology curriculum. We met one-on-one with weekly to review lesson plans and educational goals. I corrected coursework, answered questions for students, and was in charge of leading lab practicals. Additionally, I self-implemented and guided lecture-style study sessions for students before large exams."
  },
  {
    "objectID": "code/watermark.html",
    "href": "code/watermark.html",
    "title": "Charles Lehnen",
    "section": "",
    "text": "from PIL import Image, ImageDraw, ImageFont, ImageOps, ExifTags\nimport os\nimport piexif\nfrom datetime import datetime\n\n# For generating watermarks\n\ndef correct_orientation(image):\n    \"\"\"\n    Correct the orientation of an image using its EXIF data.\n    \"\"\"\n    for orientation in ExifTags.TAGS.keys():\n        if ExifTags.TAGS[orientation] == 'Orientation':\n            break\n\n    exif = image._getexif()\n\n    if exif is not None and orientation in exif:\n        if exif[orientation] == 3:\n            image = image.rotate(180, expand=True)\n        elif exif[orientation] == 6:\n            image = image.rotate(270, expand=True)\n        elif exif[orientation] == 8:\n            image = image.rotate(90, expand=True)\n\n    return image\n\ndef add_watermark(image_path, text, save_as=None):\n    original = Image.open(image_path)\n    original = correct_orientation(original)\n    txt = Image.new('RGBA', original.size, (255,255,255,0))\n    draw = ImageDraw.Draw(txt)\n\n    # Scale the font size based on the image size\n    base_width = 800  # Change this to your preferred base width\n    font_size = int((min(original.size) / base_width) * 20)\n    font_size = max(font_size, 10)  # Set a minimum font size if needed\n\n    font = ImageFont.truetype(\"arial.ttf\", font_size)\n    text_x = original.width // 2\n    text_y = original.height - 30\n\n    text_position = (text_x, text_y)\n    draw.text(text_position, text, fill=(255,255,255,128), font=font, anchor=\"mm\")\n    watermarked = Image.alpha_composite(original.convert('RGBA'), txt).convert('RGB')\n    \n    if save_as:\n        watermarked.save(save_as, 'JPEG')\n    else:\n        watermarked.save(image_path, 'JPEG')\n\ndef get_camera_info(exif_data):\n    camera_info = {}\n    # Only add EXIF data to the dictionary if it is not the default 'Unknown'\n    if piexif.ImageIFD.Model in exif_data['0th']:\n        camera_info['model'] = exif_data['0th'][piexif.ImageIFD.Model].decode('utf-8')\n\n    if piexif.ExifIFD.ISOSpeedRatings in exif_data['Exif']:\n        camera_info['iso'] = str(exif_data['Exif'][piexif.ExifIFD.ISOSpeedRatings])\n\n    if piexif.ExifIFD.FNumber in exif_data['Exif']:\n        f_number = exif_data['Exif'][piexif.ExifIFD.FNumber]\n        camera_info['fstop'] = f\"{f_number[0] / f_number[1]}\"\n\n    if piexif.ExifIFD.ExposureTime in exif_data['Exif']:\n        exposure_time = exif_data['Exif'][piexif.ExifIFD.ExposureTime]\n        camera_info['shutterspeed'] = f\"{exposure_time[0]}/{exposure_time[1]} sec\"\n\n    if piexif.ExifIFD.DateTimeOriginal in exif_data['Exif']:\n        try:\n            camera_info['datetime'] = exif_data['Exif'][piexif.ExifIFD.DateTimeOriginal].decode('utf-8')\n            camera_info['year'] = datetime.strptime(camera_info['datetime'], '%Y:%m:%d %H:%M:%S').year\n        except:\n            pass\n\n    return camera_info\n\ndef process_images(source_folder_path):\n    target_folder_path = '../images/watermark'\n    os.makedirs(target_folder_path, exist_ok=True)\n\n    for filename in os.listdir(source_folder_path):\n        if filename.lower().endswith(('.png', '.jpg', '.jpeg')):\n            image_path = os.path.join(source_folder_path, filename)\n            exif_data = piexif.load(image_path)\n            camera_info = get_camera_info(exif_data)\n\n            # Construct watermark text\n            watermark_elements = [str(camera_info.get('year', ''))]  # Start with the year\n            if 'model' in camera_info:\n                watermark_elements.append(camera_info['model'])\n            if 'iso' in camera_info:\n                watermark_elements.append(f\"ISO {camera_info['iso']}\")\n            if 'shutterspeed' in camera_info:\n                watermark_elements.append(camera_info['shutterspeed'])\n\n            # Remove empty strings and join with ', '\n            watermark_text = \"(c) Charles Lehnen \" + ', '.join(filter(None, watermark_elements))\n\n            save_as_path = os.path.join(target_folder_path, f\"{os.path.splitext(filename)[0]}_watermarked.jpg\")\n            add_watermark(image_path, watermark_text, save_as=save_as_path)\n\nprocess_images('../images/no_watermark')\n\n\nimport os\nfrom PIL import Image\n\n# For generating list of files to copy/paste into photos.qmd\n\n# Directory where the images are stored\nimage_folder = '../images/watermark/'\n# Prefix for the path to use in the markdown output\noutput_path_prefix = 'images/watermark/'\n\n# Categorize images into portrait and landscape\nlandscape_images = []\nportrait_images = []\n\nfor filename in os.listdir(image_folder):\n    if filename.lower().endswith('.jpg'):\n        with Image.open(os.path.join(image_folder, filename)) as img:\n            if img.width &gt; img.height:\n                landscape_images.append(filename)\n            else:\n                portrait_images.append(filename)\n\n# Combine the lists, placing landscape images first\nimages = landscape_images + portrait_images\n\n# Generate markdown output\nmarkdown_output = \"::: {layout=\\\"[[1, 1], [1, 1]]\\\"}\\n\"\nfor image in images:\n    image_path = os.path.join(output_path_prefix, image).replace(\"\\\\\", \"/\")\n    markdown_output += f\"![]({image_path}){{group=\\\"my-gallery\\\"}}\\n\\n\"\nmarkdown_output += \":::\"\n\nprint(markdown_output)\n\n\n\n\n::: {layout=\"[[1, 1], [1, 1]]\"}\n![](images/watermark/amblyrhynchus_cristatus_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/california_sea_lion_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/conolophus_subcristalus_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/iguana_iguana_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_3895_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_5437_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_5444_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_5670_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_5868_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_7778_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3015_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3232_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3254_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3255_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3258_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3263_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3312_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3322_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3324_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3330_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3349_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3354_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3358_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3369_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3378_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3414_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3433_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3444_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3451_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3458_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3459_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3467_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3476_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3480_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3482_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3484_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3485_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3490_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3494_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3495_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3503_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3506_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3521_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3525_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3542_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3544_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3552_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3558_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3586_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3590_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3594_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3608_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3666_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3675_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3685_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3690_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3692_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3726_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3737_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3759_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3823_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3879_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3886_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3889_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3938_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3941_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC4090_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC4093_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC4166_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC4169_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC4197_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_0110_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/IMG_5902_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3246_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3247_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3257_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3371_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3528_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC3587_watermarked.jpg){group=\"my-gallery\"}\n\n![](images/watermark/_DSC4231_watermarked.jpg){group=\"my-gallery\"}\n\n:::\n\n\n\n\nimport pandas as pd\n\ntry:\n    projects_df = pd.read_csv('../documents/projects.csv')\nexcept UnicodeDecodeError:\n    # If a UnicodeDecodeError is encountered, try reading with 'latin1' encoding\n    projects_df = pd.read_csv('../documents/projects.csv', encoding='latin1')\n\n# Generate the server function script for the Shiny app using the DataFrame\n\n# Template for a single marker in the server function\nmarker_template = \"\"\"\n      addMarkers(\n        lng = {lng}, \n        lat = {lat}, \n        popup = \"{popup}\", \n        icon = {icon_name}Icon\n      ) %&gt;%\n\"\"\"\n\n# Initialize the base of the server function string\nserver_function_script = \"server &lt;- function(input, output, session) {\\n\"\n\n# Generate the makeIcon function calls for each unique icon\nicon_template = \"\"\"\n{icon_name}Icon &lt;- makeIcon(\n  iconUrl = \"https://raw.githubusercontent.com/CharlesLehnen/portfolio/main/images/icons/{icon_file}\",\n  iconWidth = {icon_width}, iconHeight = {icon_height},\n  iconAnchorX = 25, iconAnchorY = 50\n)\n\"\"\"\n\n# Assuming icons are 50x50 by default, you can add conditional logic for different sizes if necessary\nfor icon_file in projects_df['Icon'].unique():\n    icon_name = icon_file.split('.')[0]  # Assuming the file name before the extension is the icon name\n    server_function_script += icon_template.format(\n        icon_name=icon_name,\n        icon_file=icon_file,\n        icon_width=50,  # Default width\n        icon_height=50  # Default height\n    )\n\n# Add the leaflet rendering function call\nserver_function_script += \"  output$map &lt;- renderLeaflet({\\n    leaflet() %&gt;%\\n      addProviderTiles(\\\"Esri.NatGeoWorldMap\\\") %&gt;%\"  # Added %&gt;%\n\n# Add markers for each project\nfor _, row in projects_df.iterrows():\n    icon_name = row['Icon'].split('.')[0]\n    server_function_script += marker_template.format(\n        lng=row['Longitude'],\n        lat=row['Latitude'],\n        popup=row['Description'].replace('\"', '\\\\\"'),  # Escape double quotes in the description\n        icon_name=icon_name\n    )\n\n# Remove the extra %&gt;% from the last marker_template\nserver_function_script = server_function_script.rstrip(\"%&gt;\\n\")\n\n# Close the leaflet render function and the server function\nserver_function_script += \"\\n   })     \\n}\"\n\n# Output the generated script for copy/paste\nprint(server_function_script)\n\n\nserver &lt;- function(input, output, session) {\n\nCOTOIcon &lt;- makeIcon(\n  iconUrl = \"https://raw.githubusercontent.com/CharlesLehnen/portfolio/main/images/icons/COTO.png\",\n  iconWidth = 50, iconHeight = 50,\n  iconAnchorX = 25, iconAnchorY = 50\n)\n\nblandingsIcon &lt;- makeIcon(\n  iconUrl = \"https://raw.githubusercontent.com/CharlesLehnen/portfolio/main/images/icons/blandings.png\",\n  iconWidth = 50, iconHeight = 50,\n  iconAnchorX = 25, iconAnchorY = 50\n)\n\nGalapTortIcon &lt;- makeIcon(\n  iconUrl = \"https://raw.githubusercontent.com/CharlesLehnen/portfolio/main/images/icons/GalapTort.png\",\n  iconWidth = 50, iconHeight = 50,\n  iconAnchorX = 25, iconAnchorY = 50\n)\n  output$map &lt;- renderLeaflet({\n    leaflet() %&gt;%\n      addProviderTiles(\"Esri.NatGeoWorldMap\") %&gt;%\n      addMarkers(\n        lng = -105.870087, \n        lat = 34.519939, \n        popup = \"We evaluated the ecological significance of abandoned mines in New Mexico as habitats for bats to recommend them for closure or federal protection. This included the collection of habitat, LiDAR imagery, and disease metrics. Field techniques involved off-roading, hiking, and ropework, with additional avian surveys at mine closures.\", \n        icon = COTOIcon\n      ) %&gt;%\n\n      addMarkers(\n        lng = -94.685898, \n        lat = 46.729553, \n        popup = \"I independently monitored nesting sites of the endangered Blanding's Turtles at Murphy-Hanrehan Park, assisting with road crossings, health observations, photographic documentation, and egg translocation relocation since Blanding's exhibit natal homing\", \n        icon = blandingsIcon\n      ) %&gt;%\n\n      addMarkers(\n        lng = -90.061142, \n        lat = -0.809116, \n        popup = \"My doctoral research, in collaboration with the Galapagos Conservancy and Iniciativa Galápagos, explores the impact of introducing Española Giant Tortoises to Santa Fe Island to restore its ecosystem. Using drone imagery, isotope analysis, and camera traps, this project aims to take a mult-faceted approach to quantify the cascading ecological effects on this introduction.\", \n        icon = GalapTortIcon\n      ) \n   })     \n}"
  },
  {
    "objectID": "test.html",
    "href": "test.html",
    "title": "Test",
    "section": "",
    "text": "Test1\n\n\n\nTest 2"
  }
]